name: Auto Merge Pull Requests

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  merge:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v2
        with:
          ref: ${{ github.event.pull_request.head.ref }}
          repository: ${{ github.event.pull_request.head.repo.full_name }}
          token: ${{ secrets.TEST_TOKEN }}
      - name: Configure Git
        run: |
          git config user.name "Richardson94"
          git config user.email "richcori94@gmail.com"
      - name: Merge Pull Request
        run: |
          git checkout -B ${{ github.event.pull_request.base.ref }}
          git merge --no-ff ${{ github.event.pull_request.head.ref }}
      - name: Push Changes
        uses: ad-m/github-push-action@main
        with:
          github_token: ${{ secrets.TEST_TOKEN }}
